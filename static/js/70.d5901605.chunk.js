"use strict";(self.webpackChunkreact_widget_template=self.webpackChunkreact_widget_template||[]).push([[70],{3728:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(9379),o=s(45),n=(s(5043),s(4282)),i=s(579);const l=["variant","size","type","disabled","onClick","className","title","text","imageSrc"],r=e=>{let{variant:t="primary",size:s="md",type:r="button",disabled:c=!1,onClick:d,className:u="",title:m,text:g,imageSrc:p}=e,h=(0,o.A)(e,l);return(0,i.jsxs)(n.A,(0,a.A)((0,a.A)({variant:t,size:s,type:r,disabled:c,onClick:d,className:u,title:m},h),{},{children:[p&&(0,i.jsx)("img",{src:p,alt:g,style:{width:"20px",height:"20px",marginRight:"5px"}})," ",g]}))}},4816:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(5043),o=(s(8611),s(4220)),n=s(5284),i=s(3637),l=s(6047),r=s(3003),c=s(579);const d=e=>{let{data:t,isColumn:s,onDragStart:o,onDragEnd:n}=e;const i=(0,a.useRef)(null),d=(0,r.d4)((e=>e.droppedObject.droppedObjectData.initialDraggedData));return(0,a.useEffect)((()=>{i.current&&d&&(0,l.eB)(i.current,d,o,n)}),[t,d,o,n]),t?(0,c.jsxs)("div",{className:"d-flex ".concat(s?"flex-column":"flex-row"),children:[(0,c.jsx)("h5",{ref:i,className:"mb-1 text-start title ".concat(s?"":"me-2"),children:t.title}),(0,c.jsxs)("ul",{className:"list-group d-flex flex-row flex-sm-row flex-wrap justify-content-between pb-3 pb-md-0 ".concat(s?"":"w-75"),children:[(0,c.jsxs)("li",{className:"list-group-item flex-grow-1 text-start mx-0 ps-0 pb-0 ".concat(s?"":"d-flex flex-row justify-content-around"),style:{border:"0"},children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Type:"})," ",(0,c.jsx)("span",{className:"list-text",title:t.type,children:t.type})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Owner:"})," ",(0,c.jsx)("span",{className:"list-text",title:t.owner,children:t.owner})]}),s&&(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Maturity State:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Maturity State"],children:t["Maturity State"]})]})]}),s&&(0,c.jsxs)("li",{className:"list-group-item flex-grow-1 text-start mx-0 pt-0",style:{border:"0",paddingLeft:"0"},children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Dropped Revision :"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Dropped Revision"],children:t["Dropped Revision"]})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Latest Released Revision:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Latest Released Revision"],children:t["Latest Released Revision"]})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Collabspace:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["Collaborative Space Title"],children:t["Collaborative Space Title"]})]})]}),(0,c.jsx)("li",{className:"list-group-item flex-grow-1 text-start mx-0 ".concat(s?"":"d-flex flex-row"),style:{border:"0",paddingLeft:"0"},children:"Document"!==t.type&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"CAD Format:"})," ",(0,c.jsx)("span",{className:"list-text",title:t["CAD Format"],children:t["CAD Format"]})]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"EIN:"})," ",(0,c.jsx)("span",{className:"list-text",title:t.EIN,children:t.EIN})]})]})}),(0,c.jsx)("div",{className:"d-none d-md-flex align-items-stretch",children:(0,c.jsx)("div",{className:"vr"})}),(0,c.jsx)("div",{className:"d-flex d-md-none w-100",children:(0,c.jsx)("hr",{className:"w-100"})}),(0,c.jsx)("li",{className:"list-group-item flex-grow-1 text-start mx-0",style:{border:"0"},children:(0,c.jsx)("p",{className:"description-container",title:t.Description,children:t.Description})})]})]}):null},u=e=>{let{data:t,onDragStart:s,onDragEnd:l}=e;const[r,u]=(0,a.useState)(!0);return(0,c.jsxs)(o.A,{className:"d-flex flex-row mt-4 border-0 ",style:{width:"100%"},children:[(0,c.jsx)("div",{className:"pb-3 d-none d-md-block me-5 ms-4",children:(0,c.jsx)(o.A.Img,{className:"".concat(r?"img-thumbnail":"image-resize img-thumbnail"," "),src:t.imageURL,alt:"Card image"})}),(0,c.jsx)(n.A,{className:"".concat(r?"p-0":"p-0 layout-change"," "),children:(0,c.jsx)(d,{data:t,isColumn:r,onDragStart:s,onDragEnd:l})}),(0,c.jsx)("button",{className:"me-2 p-0 btn btn-link accordion-toggle",onClick:()=>{u(!r)},children:(0,c.jsx)(i.A,{src:"https://khanfarzan17.github.io/tedting-revision-float/images/arrow.png",alt:"downArrow",className:"rotatable ".concat(r?"rotated":"")})})]})}},759:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(5043),o=(s(4119),s(3637)),n=s(8012),i=s(7419),l=s(4428),r=s(579);const c=e=>{let{widgetType:t}=e;const s=(0,i.A)(),c=(0,l.A)(),d=(0,n.A)(),{initializeDroppableArea:u}="PlantAssignment"===t?s:"bosWidget"===t?c:d,m=(0,a.useRef)(!1);return(0,a.useEffect)((()=>{m.current||(u(),m.current=!0)}),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"droppable-container mt-4",children:[(0,r.jsx)(o.A,{style:{width:"90px",height:"90px"},src:"https://thewhitechamaleon.github.io/testrapp/images/drag.png",alt:"Data Collect",className:"search-icon"}),(0,r.jsx)("span",{className:"drag-and-drop-text",children:"Drag and Drop"}),(0,r.jsxs)("div",{className:"divider-container",children:[(0,r.jsx)("hr",{className:"divider"}),(0,r.jsx)("span",{className:"divider-text",children:"or"}),(0,r.jsx)("hr",{className:"divider"})]})]})})};var d=s(4816);const u=e=>{let{data:t,widgetType:s}=e;const[o,n]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"card-with-drag-and-drop ".concat(o?"dragging":""),children:[(0,r.jsx)(c,{widgetType:s}),(0,r.jsx)(d.A,{data:t,onDragStart:()=>{n(!0)},onDragEnd:()=>{n(!1)}})]})}},768:(e,t,s)=>{s.d(t,{A:()=>b});var a=s(9379),o=s(5043),n=s(8931),i=s(7111),l=s(3585),r=s(6800),c=s(1648),d=s(3003),u=s(3728),m=s(5645),g=s(6047),p=s(1024),h=s(579);const x=e=>{let{header:t,columns:s,table:o}=e;const i="selection"===t.column.id,l=o.getState().columnPinning.left.includes(t.column.id),r=i?"is-fixed":l?"is-pinned":"",d=(0,c.gl)({id:t.column.id,disabled:"selection"===t.column.id||"EIN"===t.column.id}),{attributes:u,listeners:m,setNodeRef:g,transform:x,isDragging:v}=i?{attributes:{},listeners:{},setNodeRef:null,transform:null,isDragging:!1}:d,f={opacity:v?.8:1,position:"sticky",top:0,left:i?0:l?"var(--pinned-left)":"auto",transform:p.Ks.Transform.toString(x),transition:"width transform 0.2s ease-in-out",width:t.getSize(),zIndex:i?5:l?4:3,cursor:i?"default":"move",backgroundColor:"#f2f2f2"};return(0,h.jsxs)("th",{ref:g,style:f,"data-fixed":i,"data-pinned":l,className:r,children:[(0,h.jsx)("div",(0,a.A)((0,a.A)({className:"d-flex align-items-center header-content"},i?{}:(0,a.A)((0,a.A)({},u),m)),{},{children:(0,h.jsxs)("div",{className:"flex-grow-1",onClick:t.column.getToggleSortingHandler(),children:[t.isPlaceholder?null:(0,n.Kv)(t.column.columnDef.header,t.getContext()),"asc"===t.column.getIsSorted()?(0,h.jsx)("span",{className:"icon",children:"\u2191"}):"desc"===t.column.getIsSorted()?(0,h.jsx)("span",{className:"icon",children:"\u2193"}):null]})})),(0,h.jsx)("div",{onDoubleClick:()=>t.column.resetSize(),onMouseDown:t.getResizeHandler(),onTouchStart:t.getResizeHandler(),className:"Resizer ".concat(t.column.getIsResizing()?"isResizing":"")})]})},v=e=>{let{cell:t,columns:s,changedCells:a}=e;const o="selection"===t.column.id,i=t.column.getIsPinned(),l=o?"is-fixed":i?"is-pinned":"",r=(0,n.Kv)(t.column.columnDef.cell,t.getContext()),d=t.column.id.split("_").slice(1).join("_")||t.column.id,u=null===a||void 0===a?void 0:a[d],m=(0,c.gl)({id:t.column.id,disabled:o}),{setNodeRef:g,transform:x,isDragging:v}=o?{setNodeRef:null,transform:null,isDragging:!1}:m,f={opacity:v?.8:1,position:o||i?"sticky":"relative",left:o?0:"auto",transform:p.Ks.Transform.toString(x),transition:"width transform 0.2s ease-in-out",width:t.column.getSize(),zIndex:o?2:v?1:i?2:0};return(0,h.jsx)("td",{ref:g,style:f,className:l,title:o?"":"".concat(t.getValue()),children:o?r:(0,h.jsxs)("div",{className:"cell-content",style:{color:u?"red":"inherit",fontWeight:u?"bold":"normal"},children:[r,(0,h.jsx)("style",{children:"\n        .cell-content select {\n          color: ".concat(u?"red":"inherit"," !important;\n          font-weight: ").concat(u?"bold":"normal"," !important;\n        }\n      ")})]})})},f=e=>(console.log("Widget Type:",e),e?"tableColumnOrder_".concat(e):(console.warn("Widget type is missing, using default key"),"tableColumnOrder_default")),b=e=>{let{columns:t,data:s,editable:p=!1,meta:b,type:j,widgetType:S,latestRevision:w,droppedRevision:D,onSelectableRowsChange:R}=e;const y=(0,d.wA)(),[A,N]=(0,o.useState)(s),[E,O]=(0,o.useState)({}),[C,I]=(0,o.useState)(null),T=(0,o.useRef)(null),[k,P]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{const e=e=>{P(e.target.scrollTop>0)},t=T.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}}),[]),"Revision_FLoat_Widget"!==S&&"Plant_Assignment_Widget"!==S)var{updateTableData:z}=b;const[W,_]=(0,o.useState)((()=>{const e=f(S),s=localStorage.getItem(e);if(s)try{const e=JSON.parse(s);if(e.every((e=>"selection"===e||t.some((t=>(t.id||t.accessorKey)===e)))))return e}catch(n){console.error("Failed to parse column order for ".concat(S,":"),n)}const a=["selection"],o=t.map((e=>e.id||e.accessorKey));return a.push(...o),a}));(0,o.useEffect)((()=>{const e=f(S);localStorage.setItem(e,JSON.stringify(W))}),[W,S]),console.log("Column Order:",W);const M=(0,o.useMemo)((()=>{const e=["selection"],s=t.map((e=>e.id||e.accessorKey));return e.push(...s),e}),[t]),F=(0,o.useMemo)((()=>{const e={left:["selection","EIN "]};return t.forEach((t=>{t.columnPinning&&e.left.push(t.id||t.accessorKey)})),e}),[t]),L=(0,o.useMemo)((()=>{const e={id:"selection",header:e=>{let{table:t}=e;return(0,h.jsx)("input",{type:"checkbox",ref:e=>{e&&(e.indeterminate=t.getIsSomeRowsSelected())},checked:t.getIsAllRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()})},cell:e=>{let{row:t}=e;const s=q(t.original);return(0,h.jsx)("input",{type:"checkbox",disabled:!s,style:{cursor:s?"pointer":"not-allowed",opacity:s?1:.5},checked:t.getIsSelected(),onChange:t.getToggleSelectedHandler()})}};return[e,...p?t.map((e=>(0,a.A)((0,a.A)({},e),{},{cell:e.editable?t=>{let{row:s,getValue:o}=t;return(0,h.jsx)("input",{className:"input-cell",value:o(),onChange:t=>((e,t,s)=>{const o=A.map(((o,n)=>n===e?(0,a.A)((0,a.A)({},o),{},{[t]:s}):o));console.log("[Table] Updated Table Data:",o),null!==b&&void 0!==b&&b.updateTableData&&b.updateTableData(o),N(o)})(s.index,e.accessorKey,t.target.value)})}:e.cell}))):t]}),[t,p]),B=(0,l.FR)((0,l.MS)(l.cA,{activationConstraint:{distance:8}}),(0,l.MS)(l.IG,{activationConstraint:{delay:200,tolerance:5}}),(0,l.MS)(l.uN,{}));(0,o.useEffect)((()=>{if("Bos_Attribute_Widget"===S){const e=A.filter(q);R(e)}}),[S,A,R]);const q=e=>"Bos_Attribute_Widget"===S&&"Document"===j?"TRUE"===e.IsLatest:"Bos_Attribute_Widget"!==S||(!w||w===D),H=(0,n.N4)({data:A,columns:L,state:{rowSelection:E,columnOrder:W,columnPinning:F},onRowSelectionChange:O,onColumnOrderChange:_,getCoreRowModel:(0,i.HT)(),getSortedRowModel:(0,i.h5)(),enableRowSelection:e=>q(e.original),defaultColumn:{size:170,minSize:50,maxSize:500},columnResizeMode:"onChange",meta:{updateTableData:z}});(0,o.useEffect)((()=>{const e=H.getSelectedRowModel().flatRows.map((e=>e.original));y((0,m.dT)(e))}),[E,y]);const K=(0,o.useMemo)((()=>{const e=H.getFlatHeaders(),t={};console.log("table.getTotalSize()",H.getTotalSize());for(let s=0;s<e.length;s++){const a=e[s];t["--header-".concat(a.id,"-size")]=a.getSize(),t["--col-".concat(a.column.id,"-size")]=a.column.getSize()}return t}),[H.getState().columnSizingInfo,H.getState().columnSizing]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"toolkit my-3",children:(0,h.jsx)("div",{className:"d-flex justify-content-end button-container",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsx)(u.A,{variant:"outline-primary",size:"lg",onClick:()=>{H.getToggleAllRowsSelectedHandler()({target:{checked:!0}})},className:"m-2",text:"Select All"}),(0,h.jsx)(u.A,{variant:"outline-secondary",size:"lg",onClick:()=>{H.getToggleAllRowsSelectedHandler()({target:{checked:!1}})},className:"m-2",text:"Deselect  All"}),(0,h.jsx)(u.A,{variant:"outline-success",size:"lg",onClick:()=>{console.log("Export button clicked"),console.log("Widget Type in handleExport:",S),"Revision_FLoat_Widget"===S?(console.log("Exporting for Revision_FLoat_Widget"),(0,g.E1)(s,"Where Used Details.xlsx")):"Plant_Assignment_Widget"===S?(console.log("Exporting for Plant_Assignment_Widget"),(0,g.E1)(s,"EAN_Manufacturing.xlsx")):"Bos_Attribute_Widget"===S?(console.log("Exporting for Bos_Attribute_Widget"),(0,g.E1)(s,"Bos_Attribute_Widget.xlsx")):(console.log("Exporting with default filename for widgetType:",S),(0,g.E1)(s,"table-data.xlsx"))},className:"m-2 border-bottom-10px",text:"Export to CSV "}),(0,h.jsx)(u.A,{variant:"outline-warning",size:"lg",onClick:()=>{const e=f(S);localStorage.removeItem(e),_(M)},className:"m-2",text:"Reset Columns"})]})})}),(0,h.jsx)("div",{className:"table-info",children:(0,h.jsxs)("p",{children:[A.length," Items"]})}),(0,h.jsx)(l.Mp,{sensors:B,collisionDetection:l.fp,modifiers:[r.dU],onDragEnd:e=>{const{active:t,over:s}=e;t&&s&&t.id!==s.id&&"selection"!==t.id&&"EIN"!==t.id&&_((e=>{const a=e.indexOf(t.id),o=e.indexOf(s.id);return(0,c.be)(e,a,o)}))},children:(0,h.jsx)("div",{ref:T,className:"table-responsive ".concat(k?"is-scrolled":""),children:(0,h.jsxs)("table",{className:"table custom-table table-hover",style:(0,a.A)((0,a.A)({},K),{},{width:H.getTotalSize()}),children:[(0,h.jsx)("thead",{children:H.getHeaderGroups().map((e=>(0,h.jsx)("tr",{children:(0,h.jsx)(c.gB,{items:H.getVisibleLeafColumns().map((e=>e.id)),strategy:c.m$,children:e.headers.map((e=>(0,h.jsx)(x,{header:e,columns:t,table:H},e.id)))})},e.id)))}),(0,h.jsx)("tbody",{children:H.getRowModel().rows.length>0?H.getRowModel().rows.map((e=>(0,h.jsx)("tr",{onClick:t=>((e,t)=>{const{rows:s,rowsById:a}=H.getRowModel();if(t.shiftKey&&C)try{const t=(0,g.EC)(s,e.id,C),o=a[C].getIsSelected();t.forEach((e=>e.toggleSelected(o)))}catch(o){console.error("Multi-select with shift+click failed:",o)}else e.toggleSelected(!e.getIsSelected());I(e.id)})(e,t),className:E[e.id]?"row-selected":"",children:(0,h.jsx)(c.gB,{items:H.getVisibleLeafColumns().map((e=>e.id)),strategy:c.m$,children:e.getVisibleCells().map((s=>(0,h.jsx)(v,{cell:s,columns:t,changedCells:e.original.changedCells},s.id)))})},e.id))):(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:H.getHeaderGroups()[0].headers.length,className:"no-data p-2",children:"No Table Data"})})})]})})})]})}},4428:(e,t,s)=>{s.d(t,{A:()=>g});var a=s(5043),o=s(3003),n=s(5645),i=(s(2676),s(314)),l=s(2725),r=s(3277),c=s(9379),d=s(2268),u=s(6047);const m=()=>{const{showErrorToast:e}=(0,l.A)(),t=(0,o.wA)(),s="https://oi000186152-us1-space.3dexperience.3ds.com/enovia";let a=window.widget.getValue("email");console.log("Email in useBOSWidget:",a);return{handleBOSWidget:async(a,o,i,l,m,g)=>{try{console.log("Object id is:",i),console.log("Object type is:",l),t((0,n.Ve)(!0));const b=await(0,d.I)();if(!b)return void e(r.rK);console.log("[useBOSWidget] CSRF Headers:",b);let j="".concat(s,"/resources/v1/modeler/documents/parentId/").concat(i,"?parentRelName=SpecificationDocument"),S="Document"===l?"to":"from",w="".concat(j,"&parentDirection=").concat(S),D=await(0,u.ui)("GET",w,"",b);if(console.log("SpecDetails Response:",D),D&&D.status&&D.output.data.length>0){var p,h,x,v;let R,y,A=D.output.data.map((e=>({id:e.id,title:e.dataelements.title&&""!==e.dataelements.title.trim()?e.dataelements.title:e.dataelements.secondaryTitle,revision:e.dataelements.revision,state:e.dataelements.stateNLS,name:e.dataelements.name})));if(console.log("[useBOSWidget] Extracted Spec Documents:",A),"Document"===l){const O={data:[]};A.forEach((e=>{const t={id:e.id,identifier:e.id,type:"VPMReference",source:"".concat(s),relativePath:"/resources/v1/modeler/dseng/dseng:EngItem/".concat(e.id)};O.data.push(t)}));const C="".concat(s,"/resources/v1/modeler/dslc/version/getGraph"),I=await(0,u.ui)("POST",C,O,b);function T(e){if(/^\d+$/.test(e))return parseInt(e,10);let t=0;for(let s=0;s<e.length;s++)t=26*t+(e.charCodeAt(s)-"A".charCodeAt(0)+1);return t}console.log("response is:",I),I.output.results.forEach((e=>{const t=e.versions.reduce(((e,t)=>T(t.revision)>T(e.revision)?t:e));A=A.map((s=>e.versions.some((e=>e.id===s.id))?(0,c.A)((0,c.A)({},s),{},{isLatestRevision:s.id===t.id?"TRUE":"FALSE"}):s))})),console.log("ChildObjectDocument is:",A)}"Document"===l?(y="https://saasimplementationserverdev.azurewebsites.net/bosAttribute/getLatestSpecItemDetails",R={SpecName:m,SpecRevision:g,Items:A.map((e=>({ItemName:e.name,ItemRevision:e.revision})))}):(y="https://saasimplementationserverdev.azurewebsites.net/bosAttribute/getLatestItemSpecDetails",R={ItemName:m,ItemRevision:g,Specifications:A.map((e=>({SpecName:e.name,SpecRevision:e.revision})))}),console.log("Requested Body is:",R);const N=await(0,u.Fd)("POST",y,R);console.log("the response from node API is:",N);let E=[];null!==N&&void 0!==N&&null!==(p=N.data)&&void 0!==p&&null!==(h=p.data)&&void 0!==h&&h.Specifications?N.data.data.Specifications.forEach((e=>{let t=A.find((t=>t.name===e.SpecName&&t.revision===e.SpecRevision));E.push({childState:(null===t||void 0===t?void 0:t.state)||"",childTitle:(null===t||void 0===t?void 0:t.title)||"",childLatest:(null===t||void 0===t?void 0:t.isLatestRevision)||"FALSE",childName:e.SpecName,childRevision:e.SpecRevision,PrintOnPurchaseOrderRequired:e.PrintOnPurchaseOrderRequired,PrintOnWorkOrderRequired:e.PrintOnWorkOrderRequired,WorkOrderDocumentRequired:e.WorkOrderDocumentRequired,PrintOnReportOrderRequired:e.PrintOnReportOrderRequired,"SAP/JDE":e["SAP/JDE"]})})):null!==N&&void 0!==N&&null!==(x=N.data)&&void 0!==x&&null!==(v=x.data)&&void 0!==v&&v.Items?N.data.data.Items.forEach((e=>{let t=A.find((t=>t.name===e.ItemName&&t.revision===e.ItemRevision));E.push({childState:(null===t||void 0===t?void 0:t.state)||"",childTitle:(null===t||void 0===t?void 0:t.title)||"",childName:e.ItemName,childRevision:e.ItemRevision,childLatest:(null===t||void 0===t?void 0:t.isLatestRevision)||"FALSE",PrintOnPurchaseOrderRequired:e.PrintOnPurchaseOrderRequired,PrintOnWorkOrderRequired:e.PrintOnWorkOrderRequired,WorkOrderDocumentRequired:e.WorkOrderDocumentRequired,PrintOnReportOrderRequired:e.PrintOnReportOrderRequired,"SAP/JDE":e["SAP/JDE"]})})):console.warn("[useBOSWidget] Unexpected API response format."),console.log("[useBOSWidget] Final Merged Data for Dispatch:",E),t((0,n.Xv)(E))}else console.warn("[useBOSWidget] No connected childs."),t((0,n.Xv)([]))}catch(f){throw console.error("[useBOSWidget] Error:",f),f}finally{t((0,n.Ve)(!1))}}}},g=()=>{const{showErrorToast:e}=(0,l.A)(),{handleBOSWidget:t}=m(),s=(0,o.d4)((e=>e.droppedObject.isDropped)),c=(0,o.d4)((e=>e.droppedObject.loading)),d=(0,o.wA)(),u=(0,a.useCallback)((async s=>{try{const l=await(0,i.Sj)({dataItems:s});if(l.success){d((0,n.um)({cardData:l.data.cardData}));const e=l.data.cardData;var a,o;if(console.log("[Dragged Items are]",e),d((0,n.Rr)(!0)),l)await t(e["Collaborative Space"],e["Maturity State"],null===(a=s[0])||void 0===a?void 0:a.objectId,null===(o=s[0])||void 0===o?void 0:o.objectType,e.Name,e["Dropped Revision"])}else e(r.wX)}catch(l){console.error("[FetchObjectDetails] Error fetching details:",l),e(r.wX)}finally{d((0,n.r1)(!1))}}),[d,t]),g=(0,a.useCallback)((async t=>{(0,n.r1)(!0),console.log("[handleDrop] handleDrop called with dataItems:",t);try{t&&t.length>0?await u(t):console.warn("[handleDrop] No data items to process.")}catch(s){(0,n.r1)(!1),console.error("[Drop] Error in handleDrop:",s),console.log("[handleDrop] Error in handleDrop, setting loading to false"),e(r.nz)}}),[u,e]);return{initializeDroppableArea:(0,a.useCallback)((()=>{s?console.log("[initializeDroppableArea] \u23f3 isDropped is already true. Skipping reset."):(console.log("[initializeDroppableArea] \ud83d\ude80 Resetting isDropped to false..."),d((0,n.Rr)(!1)));const t=setInterval((()=>{const s=document.querySelector(".droppable-container");s&&(clearInterval(t),(0,i.pn)(s,g,d,e))}),100);return()=>clearInterval(t)}),[g,d]),loading:c,handleDrop:g}}},8012:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(5043),o=s(3003),n=s(5645),i=s(360),l=s(314),r=s(2725),c=s(3277);const d=()=>{const{showErrorToast:e}=(0,r.A)(),{fetchRevisionsAndParents:t}=(0,i.A)(),s=(0,o.wA)(),d=(0,o.d4)((e=>e.droppedObject.isDropped)),u=(0,o.d4)((e=>e.droppedObject.loading)),m=(0,a.useCallback)((async a=>{try{const r=await(0,l.Sj)({dataItems:a});if(r.success){var o,i;const e=r.data.cardData.relativePath,[l]=await Promise.all([t(null===(o=a[0])||void 0===o?void 0:o.objectId,null===(i=a[0])||void 0===i?void 0:i.objectType,e)]);s((0,n.um)({cardData:r.data.cardData,parentDetails:l||[]})),console.log("[fetchObjectDetails] \u2705 Redux store updated.")}else e(c.wX)}catch(r){console.error("[FetchObjectDetails] Error fetching details:",r),e(c.wX)}finally{console.log("[fetchObjectDetails] \ud83c\udfc1 Ensuring loading is reset."),s((0,n.r1)(!1))}}),[s,t,e]),g=(0,a.useCallback)((async t=>{console.log("[handleDrop] handleDrop called with dataItems:",t);try{if(t&&t.length>0){var a;const o=null===(a=t[0])||void 0===a?void 0:a.objectType;if(!["VPMReference","Document","Raw_Material"].includes(o))return void e(c.Zo);s((0,n.Rr)(!0)),console.log("[handleDrop] \ud83d\udd04 Force setting `loading = true`..."),s((0,n.r1)(!1)),setTimeout((()=>s((0,n.r1)(!0))),0),await m(t)}else console.warn("[handleDrop] No data items to process.")}catch(o){console.error("[Drop] Error in handleDrop:",o),s((0,n.r1)(!1)),console.log("[handleDrop] Error in handleDrop, setting loading to false"),e(c.nz)}}),[m,e]);return{initializeDroppableArea:(0,a.useCallback)((()=>{d?console.log("[initializeDroppableArea] \u23f3 isDropped is already true. Skipping reset."):(console.log("[initializeDroppableArea] \ud83d\ude80 Resetting isDropped to false..."),s((0,n.Rr)(!1)));const t=setInterval((()=>{const a=document.querySelector(".droppable-container");a&&(clearInterval(t),(0,l.pn)(a,g,s,e))}),100);return()=>clearInterval(t)}),[g,s]),loading:u,handleDrop:g}}},360:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(2725),o=s(3862),n=s(3277);const i=()=>{const{showSuccessToast:e,showErrorToast:t}=(0,a.A)();return{fetchRevisionsAndParents:async(e,t,s)=>{if(!s)return void console.error("[Fetch Revisions] \u274c Missing relative path.");try{const a=await o.A.post("/revFloat/getParents",{data:{id:e,type:t,relativePath:s}});if(200===a.status){return a.data}throw new Error("[Fetch Revisions] HTTP error! status: ".concat(a.status))}catch(a){return console.error("[Fetch Revisions] \u274c Error occurred:",a),null}},replaceRevisions:async(s,a,i)=>{try{const t=await o.A.post("/revFloat/floatRevisions",{SelectedParents:s,DroppedData:a,userEmail:i});if(200===t.status)return console.log("Replacement successful:",t.data),e(n.hG),{success:!0};throw new Error("[Replacement API] HTTP error! status: ".concat(t.status))}catch(l){return console.error("Error during replacement:",l),t(n.mK),{success:!1,error:l.message}}}}}}}]);
//# sourceMappingURL=70.d5901605.chunk.js.map